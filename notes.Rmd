---
title: "notes"
author: "Frank Jung"
date: "11 August 2015"
output: html_document
---

```{r setoptions, echo=TRUE, message=FALSE, warning=FALSE}
# set our runtime environment and global defaults.
require(knitr, quietly = TRUE)
require(utils, quietly = TRUE)
require(ggplot2, quietly = TRUE)
require(scales, quietly = TRUE)
opts_chunk$set(echo = FALSE, cache = TRUE, cache.path = "cache/", fig.width = 10, fig.height = 7, fig.path = "figure/")
```


Cumulative means of 1000 exponential distributions with $\lambda$ of 0.2.

```{r cummeans, echo=TRUE, message=FALSE, warning=FALSE}
set.seed(040)
n <- 1000
lambda <- 0.2
means <- cumsum(rexp(n, lambda))/(1:n)
plot(1:n, means, type = "l", lwd = 2, frame = FALSE, ylab = "Cumulative Means", xlab = "Sample Size")
abline(h = 1/lambda)
```


## Simulation of mean of $n$ dice

```{r, echo = FALSE}
par(mfrow = c(1, 3))
for (n in c(1, 2, 6)){
  temp <- matrix(sample(1 : 6, n * 10000, replace = TRUE), ncol = n)
  temp <- apply(temp, 1, mean)
  temp <- (temp - 3.5) / (1.71 / sqrt(n)) 
  dty <- density(temp)
  plot(dty$x, dty$y, xlab = "", ylab = "density", type = "n", xlim = c(-3, 3), ylim = c(0, .5))
  title(paste("sample mean of", n, "obs"))
  lines(seq(-3, 3, length = 100), dnorm(seq(-3, 3, length = 100)), col = grey(.8), lwd = 3)
  lines(dty$x, dty$y, lwd = 2)
}
```

## plot histogram with normal density

A further complication: comparison of the estimated density with the normal
density

The following tricky approach allows to superimpose on each panel two density
plot, one for the observed density and one for the normal density. The approach
exploit a further “apply” function, named plyr (for details look at offcial ply
documentation).
```{r, echo = FALSE}
set.seed(040)
lambda <- 0.2
observ <- 40
samples <- 1000
sims <- matrix(sample(rexp(observ, lambda), size = samples, replace = TRUE), nrow = samples, ncol = observ, byrow = TRUE)
simmeans <- apply(sims, 1, function (x) mean(x[]))
mean(simmeans)

# plot mean
ggplot(data = dfSampleMeanUniform, aes(sampleMean)) + geom_histogram(aes(y = ..density..), 
    col = "grey50", fill = "grey") + geom_density() + geom_line(aes(y = dens), 
    data = density, colour = "red", linetype = "dotted", size = 2) + facet_wrap(~size, 
    scales = "free")
```
Source: http://stat.unicas.it/vistoccoDownload/busStat/rCodes/centralLimitTheorem.html

## Appendices

### Session Information

This document was produced in RStudio. The session information detailing
packages used is:

```{r sessioninformation} 
sessionInfo()
```
